<div class="col-md-9">
    <bo-container backoffice-options="{'time-out': 5000}"></bo-container>
    <div ng-show="vm.event.name">
        <div class="bo-header">
            <a onclick="window.print();" class="bo-link" ng-if="hasFullAccess('api_reports_export_print')">
                <i class="fa fa-print" aria-hidden="true"></i>
                {{'api_print'|translate}}
            </a>
            <a data-toggle="modal" data-target="#emal_popup" class="bo-link" ng-if="hasFullAccess('api_reports_export_email')">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                {{'api_email'|translate}}
            </a>
            <div class="bo-dropdown dropdown bo-inline">
                <a class="bo-link" ng-if="hasFullAccess('api_reports_export_to_file')" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-share" aria-hidden="true"></i>
                    {{'api_export'|translate}}
                </a>
                <ul class="table-export dropdown-menu">
                    <li><a href="" ng-click="vm.exportAsExcel(vm.currentTab)"><i class="fa fa-file-excel-o"></i>&nbsp;Excel</a></li>
                    <li><a href="" ng-click="vm.exportAsCsv(vm.currentTab)"><i class="fa fa-file-text-o"></i>&nbsp;CSV</a></li>
                </ul>
            </div>
            <a class="bo-link" ng-if="hasFullAccess('api_event_reload')" ng-click="vm.reloadEvent()">
                <i class="fa fa-hand-o-left" aria-hidden="true"></i>
                {{'api_reload_event'|translate}}
            </a>
        </div>
        <table id="{{vm.currentTab}}"
               ng-if="['overview', 'pricetype', 'priceclass', 'sectors'].indexOf(vm.currentTab) > -1"
               class="visually-hidden"></table>
        <div class="panel panel-default" block-ui block-ui-pattern="/concertSales/">
            <div class="bo-panel">
                <div ng-include-template="event_summary.html" class="panel-body bo-panel-event"
                     ng-include-variables="{event:vm.event, showEditLink:false, showReportLink:false, withRevenue:hasFullAccess('api_reports_revenue')}"></div>
            </div>
        </div>
        <div class="bo-tab-container">
            <ul class="nav nav-tabs bo-nav-tabs bo-nav-tabs-crowded" role="tablist" id="reportdatatab">
                <li ng-repeat="tab in vm.activeTabs" ng-class="{'active': vm.currentTab == tab.name}" ng-hide="tab.hiddenInShows && vm.event.isShow">
                    <a data-toggle="tab" ng-style="vm.currentTab == tab.name ? {'background-color':pointAccentColor}:{'background-color':'#fff'}"
                       role="tab" aria-controls="{{tab.name}}" ng-click="vm.tabSelectEvent(tab.name)">
                        <i class="fa" aria-hidden="true" ng-class="tab.icon"></i>
                        <span class="tab-name">{{tab.translationCode|translate}}</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="tab-content bo-event-report-tab-panes" block-ui block-ui-pattern="/eventSalesReport/">
            <!-- Tab: overview -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'overview'}" id="overview" role="tabpanel">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-inline">
                            <div class="input-group bo-input">
                                <div ng-include-template="components/report_daterangepicker.html" ng-include-variables="{vm:vm}"></div>
                            </div>
                            <div class="input-group bo-input" ng-if="vm.hasSalesPoint()">
                                <div ng-include-template="components/report_centerdropdown.html" ng-include-variables="{vm:vm, tabFilter:vm.overviewFilter}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 text-right">
                        <span class="visible-print">{{vm.getCurrentTabCode()|translate}}. {{'api_print_display'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.overviewFilter.display=='tickets'}"
                                    ng-click="vm.setOverviewDisplay('tickets')">{{'api_tickets'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.overviewFilter.display=='revenue'}"
                                    ng-if="hasFullAccess('api_reports_revenue')"
                                    ng-click="vm.setOverviewDisplay('revenue')">{{'api_revenue'|translate}}
                            </button>
                        </div>
                        <span class="visible-print">{{'api_print_display_and'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.overviewFilter.groupBy=='day'}"
                                    ng-click="vm.setOverviewGroupBy('day')">{{'api_day'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.overviewFilter.groupBy=='week'}"
                                    ng-click="vm.setOverviewGroupBy('week')">{{'api_week'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.overviewFilter.groupBy=='month'}"
                                    ng-click="vm.setOverviewGroupBy('month')">{{'api_month'|translate}}
                            </button>
                        </div>
                    </div>
                </div>
                <div ng-if="vm.overviewLineGraph.data.length === 0" class="bo-content text-center">
                    <span>{{'api_no_data_available'|translate}}</span>
                </div>
                <div ng-if="vm.overviewLineGraph.data.length > 0" class="bo-content">
                    <div class="bo-content-block">
                        <canvas id="overviewLine" class="chart chart-line" chart-data="vm.overviewLineGraph.data"
                                chart-labels="vm.overviewLineGraph.labels"
                                chart-series="vm.overviewLineGraph.series"
                                chart-options="vm.overviewLineGraph.options"
                                chart-dataset-override="vm.overviewLineGraph.datasetOverride"
                                chart-colors="vm.overviewLineGraph.colors">
                        </canvas>
                    </div>
                    <div class="row bo-content-block">
                        <div class="col-lg-6">
                            <canvas class="chart chart-bar" chart-data="vm.overviewBarGraph.data"
                                    chart-labels="vm.overviewBarGraph.labels"
                                    chart-options="vm.overviewBarGraph.options"
                                    chart-series="vm.overviewBarGraph.series"
                                    chart-colors="vm.overviewBarGraph.colors"
                                    chart-dataset-override="vm.overviewBarGraph.datasetOverride"></canvas>
                        </div>
                        <div class="col-lg-6">
                            <div class="bo-table bo-table-striped">
                                <div class="bo-table-header">
                                    <div class="row bo-table-row">
                                        <div class="col-xs-5 bo-table-cell">{{'api_overview'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">{{'api_tickets'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">%</div>
                                        <div class="col-xs-3 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">{{'api_revenue'|translate}}</div>
                                    </div>
                                </div>
                                <div class="bo-table-body">
                                    <div class="row bo-table-row">
                                        <div class="col-xs-5 bo-table-cell">{{'api_overview_generated_total'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">
                                            {{vm.myOverviewBarData.generatedCount}}
                                        </div>
                                        <div class="col-xs-2 bo-table-cell">100%</div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: "
                                            ng-if="hasFullAccess('api_reports_revenue')">
                                            {{vm.myOverviewBarData.generatedSum | number:2}}
                                            {{vm.myOverviewBarData.currency}}
                                        </div>
                                    </div>
                                    <div class="row bo-table-row bo-table-title"
                                         ng-repeat="overviewData in vm.myOverviewBarData.sales" ng-if="overviewData.groupId == 'venue_occupancy'">
                                        <div class="col-xs-5 bo-table-cell">{{overviewData.groupName|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{overviewData.rowCount}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myOverviewBarData.generatedCount ? (overviewData.rowCount / vm.myOverviewBarData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{overviewData.rowSum | number:2}}
                                            {{vm.myOverviewBarData.currency}}
                                        </div>
                                    </div>
                                </div>
                                <div class="bo-table-body" ng-repeat="overviewData in vm.myOverviewBarData.sales"
                                     ng-if="overviewData.groupId != 'venue_occupancy' && overviewData.groupId != 'generated'">
                                    <div class="row bo-table-row bo-table-subtitle">
                                        <div class="col-xs-5 bo-table-cell">
                                            {{overviewData.groupName|translate}}
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{overviewData.rowCount}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myOverviewBarData.generatedCount ? (overviewData.rowCount / vm.myOverviewBarData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{overviewData.rowSum | number:2}}
                                            {{vm.myOverviewBarData.currency}}
                                        </div>
                                    </div>
                                    <div ng-repeat="overviewRow in overviewData.rows" class="row bo-table-row {{overviewRow.isRefund ? 'text-danger' : ''}}">
                                        <div class="col-xs-5 bo-table-cell">
                                            <i class="fa fa-square" ng-attr-style="color: {{overviewRow.color}}!important;"></i>
                                            {{overviewRow.typeName|translate}}:
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{overviewRow.count}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myOverviewBarData.generatedCount ? ((overviewRow.isRefund ? -1 : 1) * overviewRow.count / vm.myOverviewBarData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{overviewRow.sum | number:2}}
                                            {{vm.myOverviewBarData.currency}}
                                        </div>
                                    </div>
                                </div>
                                <div class="bo-table-body" ng-repeat="overviewData in vm.myOverviewBarData.sales" ng-if="overviewData.groupId == 'venue_occupancy'">
                                    <div class="row bo-table-row bo-table-subtitle" ng-repeat="overviewRow in overviewData.rows">
                                        <div class="col-xs-5 bo-table-cell">
                                            <span class="fa fa-square" ng-attr-style="color: {{overviewRow.color}}!important;"></span>
                                            {{overviewRow.typeName|translate}}
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{overviewRow.count}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myOverviewBarData.generatedCount ? (overviewRow.count / vm.myOverviewBarData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{overviewRow.sum | number:2}}
                                            {{vm.myOverviewBarData.currency}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tab: price types -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'pricetype'}" id="pricetype" role="tabpanel">
                <div class="row">
                    <div class="col-sm-6 bo-inline-print">
                        <div class="form-inline">
                            <div class="input-group bo-input">
                                <div ng-include-template="components/report_daterangepicker.html" ng-include-variables="{vm:vm}"></div>
                            </div>
                            <div class="input-group bo-input" ng-if="vm.hasSalesPoint()">
                                <div ng-include-template="components/report_centerdropdown.html" ng-include-variables="{vm:vm, tabFilter:vm.pricetypeFilter}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 text-right">
                        <span class="visible-print">{{vm.getCurrentTabCode()|translate}}. {{'api_print_display'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.pricetypeFilter.display=='tickets'}"
                                    ng-click="vm.setPricetypeDisplay('tickets')">{{'api_tickets'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-if="hasFullAccess('api_reports_revenue')"
                                    ng-class="{ 'active': vm.pricetypeFilter.display=='revenue'}"
                                    ng-click="vm.setPricetypeDisplay('revenue')">{{'api_revenue'|translate}}
                            </button>
                        </div>
                        <span class="visible-print">{{'api_print_display_and'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.pricetypeFilter.groupBy=='day'}"
                                    ng-click="vm.setPricetypeGroupBy('day')">{{'api_day'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.pricetypeFilter.groupBy=='week'}"
                                    ng-click="vm.setPricetypeGroupBy('week')">{{'api_week'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.pricetypeFilter.groupBy=='month'}"
                                    ng-click="vm.setPricetypeGroupBy('month')">{{'api_month'|translate}}
                            </button>
                        </div>
                    </div>
                </div>
                <div ng-if="vm.pricetypeLineGraph.data.length === 0" class="bo-content text-center">
                    <span>{{'api_no_data_available'|translate}}</span>
                </div>
                <div ng-if="vm.pricetypeLineGraph.data.length > 0" class="bo-content">
                    <div class="bo-content-block">
                        <canvas id="priceTypeLine" class="chart chart-line" chart-data="vm.pricetypeLineGraph.data"
                                chart-labels="vm.pricetypeLineGraph.labels"
                                chart-series="vm.pricetypeLineGraph.series"
                                chart-options="vm.pricetypeLineGraph.options"
                                chart-colors="vm.pricetypeLineGraph.colors"
                                chart-dataset-override="vm.pricetypeLineGraph.datasetOverride">
                        </canvas>
                    </div>
                    <div class="row bo-content-block">
                        <div class="col-lg-6">
                            <div class="btn-group bo-switch-group-sub pull-right" role="group">
                                <span class="visible-print">{{vm.getCurrentTabCode()|translate}}. {{'api_print_display'|translate}}</span>
                                <button type="button" class="btn btn-default bo-switch"
                                        ng-class="{ 'active': vm.pricetypeFilter.pieDisplay=='tickets'}"
                                        ng-click="vm.setPricetypePieDisplay('tickets')">
                                    {{'api_tickets'|translate}}
                                </button>
                                <button type="button" ng-if="hasFullAccess('api_reports_revenue')"
                                        class="btn btn-default bo-switch"
                                        ng-class="{ 'active': vm.pricetypeFilter.pieDisplay=='revenue'}"
                                        ng-click="vm.setPricetypePieDisplay('revenue')">
                                    {{'api_revenue'|translate}}
                                </button>
                            </div>
                            <canvas id="pricetypePie" class="chart chart-pie"
                                    chart-data="vm.pricetypePieGraph.data"
                                    chart-labels="vm.pricetypePieGraph.labels"
                                    chart-options="vm.pricetypePieGraph.options"
                                    chart-colors="vm.pricetypePieGraph.colors"></canvas>
                        </div>
                        <div class="col-lg-6">
                            <div class="bo-table bo-table-striped">
                                <div class="bo-table-header">
                                    <div class="row bo-table-row">
                                        <div class="col-xs-5 bo-table-cell">{{'api_pricetype'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">{{'api_tickets'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">%</div>
                                        <div class="col-xs-3 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">{{'api_revenue'|translate}}</div>
                                    </div>
                                </div>
                                <div class="bo-table-body">
                                    <div class="row bo-table-row bo-table-title">
                                        <div class="col-xs-5 bo-table-cell">{{'api_issued_total'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">
                                            {{vm.myPriceTypePieData.generatedCount}}
                                        </div>
                                        <div class="col-xs-2 bo-table-cell">100%</div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: "
                                            ng-if="hasFullAccess('api_reports_revenue')">
                                            {{vm.myPriceTypePieData.generatedSum | number:2}}
                                            {{vm.myPriceTypePieData.currency}}
                                        </div>
                                    </div>
                                </div>
                                <div class="bo-table-body" ng-repeat="pricetypeData in vm.myPriceTypePieData.sales">
                                    <div class="row bo-table-row bo-table-subtitle">
                                        <div class="col-xs-5 bo-table-cell">{{pricetypeData.groupName|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{pricetypeData.rowCount}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myPriceTypePieData.generatedCount ? ( pricetypeData.rowCount / vm.myPriceTypePieData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{pricetypeData.rowSum | number:2}}
                                            {{pricetypeData.currency}}
                                        </div>
                                    </div>
                                    <div class="row bo-table-row" ng-repeat="pricetypeItem in pricetypeData.priceTypes">
                                        <div class="col-xs-5 bo-table-cell">
                                            <i class="fa fa-square" ng-attr-style="color: {{pricetypeItem.color}}!important;"></i>
                                            {{pricetypeItem.priceTypeName}}
                                            <span ng-if="pricetypeItem.minPrice > 0 && pricetypeItem.maxPrice > 0">
                                                ({{ pricetypeItem.minPrice != pricetypeItem.maxPrice ? (pricetypeItem.minPrice | number:2) + "-" + (pricetypeItem.maxPrice | number:2) : (pricetypeItem.minPrice | number:2)}})
                                            </span>
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{pricetypeItem.count}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myPriceTypePieData.generatedCount ? ( pricetypeItem.count / vm.myPriceTypePieData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{pricetypeItem.sum | number:2}}
                                            {{vm.myPriceTypePieData.currency}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tab: price classes -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'priceclass'}" id="priceclass" role="tabpanel">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-inline">
                            <div class="input-group bo-input">
                                <div ng-include-template="components/report_daterangepicker.html" ng-include-variables="{vm:vm}"></div>
                            </div>
                            <div class="input-group bo-input" ng-if="vm.hasSalesPoint()">
                                <div ng-include-template="components/report_centerdropdown.html" ng-include-variables="{vm:vm, tabFilter:vm.priceclassFilter}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 text-right">
                        <span class="visible-print">{{vm.getCurrentTabCode()|translate}}. {{'api_print_display'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.priceclassFilter.display=='tickets'}"
                                    ng-click="vm.setPriceclassDisplay('tickets')">{{'api_tickets'|translate}}
                            </button>
                            <button type="button" ng-if="hasFullAccess('api_reports_revenue')"
                                    class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.priceclassFilter.display=='revenue'}"
                                    ng-click="vm.setPriceclassDisplay('revenue')">{{'api_revenue'|translate}}
                            </button>
                        </div>
                        <span class="visible-print">{{'api_print_display_and'|translate}}</span>
                        <div class="btn-group bo-switch-group" role="group">
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.priceclassFilter.groupBy=='day'}"
                                    ng-click="vm.setPriceclassGroupBy('day')">{{'api_day'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.priceclassFilter.groupBy=='week'}"
                                    ng-click="vm.setPriceclassGroupBy('week')">{{'api_week'|translate}}
                            </button>
                            <button type="button" class="btn btn-default bo-switch"
                                    ng-class="{ 'active': vm.priceclassFilter.groupBy=='month'}"
                                    ng-click="vm.setPriceclassGroupBy('month')">{{'api_month'|translate}}
                            </button>
                        </div>
                    </div>
                </div>
                <div ng-if="vm.priceclassLineGraph.data.length === 0" class="bo-content text-center">
                    <span>{{'api_no_data_available'|translate}}</span>
                </div>
                <div ng-if="vm.priceclassLineGraph.data.length > 0" class="bo-content">
                    <div class="bo-content-block">
                        <canvas id="line" class="chart chart-line" chart-data="vm.priceclassLineGraph.data"
                                chart-labels="vm.priceclassLineGraph.labels"
                                chart-series="vm.priceclassLineGraph.series"
                                chart-options="vm.priceclassLineGraph.options"
                                chart-colors="vm.priceclassLineGraph.colors"
                                chart-dataset-override="vm.priceclassLineGraph.datasetOverride" height="100px">
                        </canvas>
                    </div>
                    <div class="row bo-content-block">
                        <div class="col-lg-6">
                            <div class="btn-group bo-switch-group-sub pull-right" role="group">
                                <button type="button" class="btn btn-default bo-switch"
                                        ng-class="{ 'active': vm.priceclassFilter.pieDisplay=='tickets'}"
                                        ng-click="vm.setPriceclassPieDisplay('tickets')">
                                    {{'api_tickets'|translate}}
                                </button>
                                <button type="button" ng-if="hasFullAccess('api_reports_revenue')"
                                        class="btn btn-default bo-switch"
                                        ng-class="{ 'active': vm.priceclassFilter.pieDisplay=='revenue'}"
                                        ng-click="vm.setPriceclassPieDisplay('revenue')">
                                    {{'api_revenue'|translate}}
                                </button>
                            </div>
                            <canvas id="priceclassPie" class="chart chart-pie"
                                    chart-data="vm.priceclassPieGraph.data"
                                    chart-labels="vm.priceclassPieGraph.labels"
                                    chart-options="vm.priceclassPieGraph.options"
                                    chart-colors="vm.priceclassPieGraph.colors"></canvas>
                        </div>
                        <div class="col-lg-6">
                            <div class="bo-table bo-table-striped">
                                <div class="bo-table-header">
                                    <div class="row bo-table-row">
                                        <div class="col-xs-5 bo-table-cell">{{'api_priceclass'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">{{'api_tickets'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell">%</div>
                                        <div class="col-xs-3 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">{{'api_revenue'|translate}}</div>
                                    </div>
                                </div>
                                <div class="bo-table-body">
                                    <div class="row bo-table-row bo-table-title">
                                        <div class="col-xs-5 bo-table-cell">{{'api_issued_total'|translate}}</div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{vm.myPriceClassPieData.generatedCount}}</div>
                                        <div class="col-xs-2 bo-table-cell">100%</div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{vm.myPriceClassPieData.generatedSum | number:2}}
                                            {{vm.myPriceClassPieData.currency}}
                                        </div>
                                    </div>
                                </div>
                                <div class="bo-table-body" ng-repeat="priceclassData in vm.myPriceClassPieData.sales">
                                    <div class="row bo-table-row bo-table-subtitle">
                                        <div class="col-xs-5 bo-table-cell">
                                            {{priceclassData.groupName|translate}}
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{priceclassData.rowCount}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myPriceClassPieData.generatedCount ? ( priceclassData.rowCount / vm.myPriceClassPieData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{priceclassData.rowSum | number:2}}
                                            {{priceclassData.currency}}
                                        </div>
                                    </div>
                                    <div class="row bo-table-row" ng-repeat="priceclassItem in priceclassData.priceClasses">
                                        <div class="col-xs-5 bo-table-cell">
                                            <i class="fa fa-square" ng-attr-style="color: {{priceclassItem.color}}!important;"></i>
                                            {{priceclassItem.priceClassName}}
                                            <span ng-if="priceclassItem.minPrice > 0 && priceclassItem.maxPrice > 0">
                                                ({{ priceclassItem.minPrice != priceclassItem.maxPrice ? (priceclassItem.minPrice | number:2) + "-" + (priceclassItem.maxPrice | number:2) : (priceclassItem.minPrice | number:2)}})
                                            </span>
                                        </div>
                                        <div class="col-xs-2 bo-table-cell" data-label="{{'api_tickets'|translate}}: ">{{priceclassItem.count}}</div>
                                        <div class="col-xs-2 bo-table-cell">
                                            {{vm.myPriceClassPieData.generatedCount ? ( priceclassItem.count / vm.myPriceClassPieData.generatedCount ) * 100 : 0 | number:0}}%
                                        </div>
                                        <div class="col-xs-3 bo-table-cell" data-label="{{'api_revenue'|translate}}: " ng-if="hasFullAccess('api_reports_revenue')">
                                            {{priceclassItem.sum | number:2}}
                                            {{vm.myPriceClassPieData.currency}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tab: sections -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'sections'}" id="sections" role="tabpanel">
                <div block-ui block-ui-pattern="/Basket|Booking|Sector/">
                    <div ng-if="!selectedSectionId && !vm.bookingStep" ng-include="'views/partials/booking/sections.html'"></div>
                    <div ng-if="selectedSectionId && !vm.bookingStep && !vm.reservationMode" ng-include="'views/partials/booking/places.html'"></div>
                    <div ng-if="vm.bookingStep" ng-include="'views/partials/booking/' + vm.bookingStep + '.html'"></div>
                </div>
            </div>
            <!-- Tab: locations -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'locations'}" id="locations" role="tabpanel">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-inline">
                            <div class="input-group bo-input">
                                <div ng-include-template="components/report_daterangepicker.html" ng-include-variables="{vm:vm}"></div>
                            </div>
                            <div class="input-group bo-input" ng-if="vm.hasSalesPoint()">
                                <div ng-include-template="components/report_centerdropdown.html" ng-include-variables="{vm:vm, tabFilter:vm.locationsFilter}"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-if="vm.myLocationsData.sales.length === 0" class="bo-content text-center">
                    <span>{{'api_no_data_available'|translate}}</span>
                </div>
                <div ng-if="vm.myLocationsData.sales.length > 0" class="bo-content">
                    <div class="bo-content-block">
                        <div class="bo-table bo-table-striped">
                            <div class="bo-table-header">
                                <div class="row bo-table-row">
                                    <div class="col-xs-2 bo-table-cell"></div>
                                    <div class="col-xs-1 bo-table-cell">{{'api_locations_internet'|translate}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{'api_locations_salespoints'|translate}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{'api_locations_total'|translate}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{'api_locations_refund'|translate}}</div>
                                    <div class="col-xs-1 bo-table-cell">%</div>
                                    <div class="col-xs-2 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">{{'api_locations_revenue'|translate}}</div>
                                </div>
                            </div>
                            <div class="bo-table-body">
                                <div class="row bo-table-row bo-table-title">
                                    <div class="col-xs-2 bo-table-cell">{{'api_locations_all_sales'|translate}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{vm.myLocationsData.salesTotal.internetCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{vm.myLocationsData.salesTotal.spCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{vm.myLocationsData.salesTotal.totalCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{vm.myLocationsData.salesTotal.refundCount}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{vm.myLocationsData.salesTotal.percent}}%</div>
                                    <div class="col-xs-2 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">
                                        {{(vm.myLocationsData.salesTotal.totalSum) | number:2}}
                                        {{vm.myLocationsData.salesTotal.currency}}
                                    </div>
                                </div>
                            </div>
                            <div class="bo-table-body" ng-repeat="locationData in vm.myLocationsData.sales">
                                <div class="row bo-table-row bo-table-subtitle">
                                    <div class="col-xs-2 bo-table-cell">{{locationData.country|translate}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{locationData.internetCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{locationData.spCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{locationData.totalCount}}</div>
                                    <div class="col-xs-2 bo-table-cell" ng-class="{'text-danger': locationData.refundCount}">{{locationData.refundCount}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{(locationData.percent) | number:0}}%</div>
                                    <div class="col-xs-2 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">
                                        {{(locationData.totalSum) | number:2}}
                                        {{locationData.currency}}
                                    </div>
                                </div>
                                <div class="row bo-table-row"
                                     ng-repeat="city in locationData.cities"
                                     ng-if="!locationData.showAllCities && $index < 5 || locationData.showAllCities">
                                    <div class="col-xs-2 bo-table-cell">{{city.city|translate}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{city.internetCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{city.spCount}}</div>
                                    <div class="col-xs-2 bo-table-cell">{{city.totalCount}}</div>
                                    <div class="col-xs-2 bo-table-cell" ng-class="{'text-danger': city.refundCount}">{{city.refundCount}}</div>
                                    <div class="col-xs-1 bo-table-cell">{{(city.percent) | number:0}}%</div>
                                    <div class="col-xs-2 bo-table-cell" ng-if="hasFullAccess('api_reports_revenue')">
                                        {{(city.totalSum) | number:2}}
                                        {{city.currency}}
                                    </div>
                                </div>
                                <div class="row bo-table-row bo-table-footer" ng-if="locationData.cities.length > 4">
                                    <div class="col-xs-12 bo-table-cell">
                                        <a class="bo-link" ng-click="locationData.showAllCities = !locationData.showAllCities">
                                            <span ng-if="!locationData.showAllCities"><i class="fa fa-chevron-down"></i>{{'api_view_more'|translate}}</span>
                                            <span ng-if="locationData.showAllCities"><i class="fa fa-chevron-up"></i>{{'api_collapse'|translate}}</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tab: bookings -->
            <div class="tab-pane" ng-class="{'active': vm.currentTab == 'bookings'}" id="bookings" role="tabpanel">
                <div block-ui block-ui-pattern="/myBookings/">
                    <div ng-include="'views/partials/booking/bookings.html'"></div>
                </div>
            </div>
        </div>

        <div id="emal_popup" class="modal fade bo-modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn btn-sm btn-default bo-close-btn" data-dismiss="modal"><i
                                class="fa fa-times"></i></button>
                        <h4 class="modal-title"><i class="fa fa-envelope"/>Email report: By pricetype</h4>
                    </div>
                    <div class="modal-body">
                        <h2>Rammstein</h2>
                        <div class="bo-modal-datetime_block">
                            <div>
                                <div class="bo-modal-date">26.01.2017</div>
                                <div class="bo-modal-time">18:30</div>
                            </div>
                            <div class="bo-modal-place">Kino Sõprus, Tallinn</div>
                        </div>
                        <form class="form-horizontal bo-modal-form" role="form">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">From:</label>
                                <div class="col-sm-9 bo-modal-form-empty-input">
                                    john.longfamilyname@promoter.com
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="input1" class="col-sm-3 control-label">Receiver email:</label>
                                <div class="col-sm-9">
                                    <input class="form-control" type="text" value="" id="input1">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="input2" class="col-sm-3 control-label">Subject:</label>
                                <div class="col-sm-9">
                                    <input class="form-control" type="text" value="" id="input2">
                                </div>
                            </div>
                            <div class="form-group form-group-sm">
                                <label for="input3" class="col-sm-3 control-label">Attachment:</label>
                                <div class="col-sm-9">
                                    <select id="input3" class="form-control" selectpicker ng-model="someNameHere1">
                                        <option>Csv</option>
                                        <option>Xls</option>
                                        <option>Pdf</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group form-group-sm">
                                <label for="input4" class="col-sm-3 control-label">Frequency:</label>
                                <div class="col-sm-9">
                                    <select id="input4" class="form-control bo-modal-form-frequency" selectpicker
                                            ng-model="someNameHere2" frequency>
                                        <option>Once</option>
                                        <option>Daily</option>
                                        <option>Weekly</option>
                                        <option>Montly</option>
                                        <option>Quarterly</option>
                                    </select>
                                    <div class="bo-modal-form-frequency-servant">
                                        <div id="email_popup_periods" class="bo-modal-form-period">Period: 10.06.2016 -
                                            10.01.2017
                                        </div>
                                        <div id="email_popup_weekdays"
                                             class="btn-group bo-modal-form-weekdays btn-group-sm">
                                            <button type="button" class="btn btn-primary">M</button>
                                            <button type="button" class="btn btn-default">T</button>
                                            <button type="button" class="btn btn-default">W</button>
                                            <button type="button" class="btn btn-default">T</button>
                                            <button type="button" class="btn btn-default">F</button>
                                            <button type="button" class="btn btn-default">S</button>
                                            <button type="button" class="btn btn-default">S</button>
                                        </div>
                                        <div id="email_popup_monthdays" class="bo-modal-form-monthdays">
                                            <select class="form-control" selectpicker ng-model="someNameHere3">
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="22">22</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group form-group-sm">
                                <label for="input5" class="col-sm-3 control-label">Active for:</label>
                                <div class="col-sm-9">
                                    <select id="input5" class="form-control" selectpicker ng-model="someNameHere4">
                                        <option>1 month</option>
                                        <option>2 months</option>
                                        <option>3 months</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="input6" class="col-sm-3 control-label">Comment:</label>
                                <div class="col-sm-9">
                                    <textarea id="input6" class="form-control"></textarea>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <a href="" class="bo-modal-view-all">View all email reports</a>
                        <button type="button" class="btn btn-success">Send</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-md-3" ng-show="vm.event.name" ng-if="vm.relatedEvents" ng-include-template="related_events.html"
     ng-include-variables="{ related: vm.relatedEvents, vm: vm, user: user }"></div>

<script language="JavaScript">
    <!--

    $('#reportdatatab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
    })

    //-->
</script>