<h2>Reservations:</h2>
<div class="bo-tabs-controls bo-salesoverview-controls clearfix">
    <div class="form-inline">
        <div class="form-group">
            <span class="visible-print">{{'api_print_period'|translate}}</span>
            <div class="input-group data_range col-xs-12">
                <button class="btn btn-default bo-datarangepicker-button bo-tabs-controls-item" type="button"
                        data-control="daterangepicker">
                    <input type="text" daterangepicker class="form-control"
                           ng-model="vm.filterPeriod" daterangepicker-neutral-timezone
                           ng-attr-data-min-date="{{vm.minFilterDate}}"
                           ng-attr-data-max-date="{{vm.maxFilterDate}}" disabled/>
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                </button>
            </div>
        </div>
        <div class="form-group">
            <div class="inner-addon right-addon">
                <i class="fa fa-search" ng-click="vm.bookingFilter.clientName = vm.bookingClientName"></i>
                <input type="text" class="form-control" ng-model="vm.bookingClientName" placeholder="Client">
            </div>
        </div>
        <div class="form-group">
            <div class="inner-addon right-addon">
                <i class="fa fa-search" ng-click="vm.bookingFilter.bookingNr = vm.bookingNr"></i>
                <input type="text" class="form-control" ng-model="vm.bookingNr" placeholder="Reservation #">
            </div>
        </div>
        <div class="form-group">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle bo-centers-dropdown" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="true">
                    <span>{{vm.bookingFilter.typeId ? ((vm.bookingTypes | filter:{id: vm.bookingFilter.typeId})[0].name) : 'All types'}}</span>
                    &nbsp;
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a ng-repeat="type in vm.bookingTypes" ng-click="vm.bookingFilter.typeId = type.id">{{type.name}}</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="form-group">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle bo-centers-dropdown" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="true">
                    <span>{{vm.bookingFilter.statusId ? ((vm.bookingStatuses | filter:{id: vm.bookingFilter.statusId})[0].name) : 'All statuses'}}</span>
                    &nbsp;
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a ng-repeat="status in vm.bookingStatuses" ng-click="vm.bookingFilter.statusId = status.id">{{status.name}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<table class="table">
    <thead>
    <tr>
        <th></th>
        <th>Reservation #</th>
        <th>Reserved for</th>
        <th>Invoice #</th>
        <th>Tickets</th>
        <th>Seats</th>
        <th>Amount</th>
    </tr>
    </thead>
    <tr ng-if="bookingSuccessAlert">
        <td colspan="7">
            <div class="alert alert-success" role="alert">
                <span class="close" data-dismiss="alert" aria-label="close">&times;</span>
                Your reservation was successful and email was dispatch! You can always comeback to reservations, to see
                status.
            </div>
        </td>
    </tr>
    <tbody ng-repeat="(key, booking) in vm.myBookings.bookings">
    <tr ng-class="{'active': key == vm.bookingsRowExpanded}">
        <td ng-click="vm.bookingsRowExpanded = (vm.bookingsRowExpanded == key ? vm.bookingsRowExpanded = null : vm.bookingsRowExpanded = key)">
            <i class="fa fa-sort-desc" ng-if="key != vm.bookingsRowExpanded"></i>
            <i class="fa fa-sort-asc" ng-if="key == vm.bookingsRowExpanded"></i>
        </td>
        <td>
            <div>{{booking.number}}</div>
            <div>Reserved: {{booking.created | date:'dd.MM.yyyy'}}</div>
            <div>Due date: {{booking.expireAt | date:'dd.MM.yyyy'}}</div>
        </td>
        <td>
            <div>{{booking.personName}}</div>
            <div>{{booking.email}}</div>
            <div ng-if="booking.organisationName">{{booking.organisationName}}</div>
        </td>
        <td>
            <div>{{booking.id}}</div>
            <div>Payment: {{booking.paymentTypeName}}</div>
            <div>Paid: ???</div>
        </td>
        <td>
            {{booking.ticketsCount}}
        </td>
        <td>{{booking.ticketsInfo}}</td>
        <td>???</td>
    </tr>
    <tr ng-if="key == vm.bookingsRowExpanded" class="active">
        <td></td>
        <td>
            Reserved by:
            <div>{{booking.personName}}</div>
            <div ng-if="booking.organisationName">{{booking.organisationName}}</div>
        </td>
        <td>
            <div>Status: ???</div>
            <div>Type: ???</div>
        </td>
        <td colspan="4">
            Notes: ???
            <button class="btn btn-bookings pull-right">Edit <i class="fa fa-edit"></i></button>
            <button class="btn btn-bookings pull-right">Cancel <i class="fa fa-times"></i></button>
        </td>
    </tr>
    </tbody>

</table>