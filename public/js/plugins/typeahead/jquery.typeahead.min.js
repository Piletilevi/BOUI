(function(e,g,c,a){e.Typeahead={source:{}};if(typeof Object.preventExtensions!=="function"){Object.preventExtensions=function(k){return k}}var j={input:null,minLength:2,maxItem:8,dynamic:false,delay:300,order:null,offset:false,hint:false,accent:false,highlight:true,list:false,group:false,groupMaxItem:false,filter:false,backdrop:false,cache:false,ttl:3600000,compression:false,selector:{container:"typeahead-container",group:"typeahead-group",result:"typeahead-result",list:"typeahead-list",display:"typeahead-display",query:"typeahead-query",filter:"typeahead-filter",filterButton:"typeahead-filter-button",filterValue:"typeahead-filter-value",dropdown:"typeahead-dropdown",button:"typeahead-button",backdrop:"typeahead-backdrop",hint:"typeahead-hint"},display:"display",template:null,source:null,callback:{onInit:null,onResult:null,onMouseEnter:null,onMouseLeave:null,onClick:null,onSubmit:null},debug:false};var b={dynamic:[true,false],order:["asc","desc"],offset:[true,false],accent:[true,false],cache:[true,false],compression:[true,false],debug:[true,false]};var f=".typeahead.input";var d={from:"ãàáäâẽèéëêìíïîõòóöôùúüûñç",to:"aaaaaeeeeeiiiiooooouuuunc"};var h=function(K,G){var V="",F=null,o=[],O=[],B=[],P=null,M,N,s={},D={},x=null,J="window.Typeahead.source['"+K.selector+"'].populate",q=0,A=0;function t(){for(var X in G){if(!G.hasOwnProperty(X)){continue}if(X==="source"){if(JSON.stringify(G[X])==="{}"){G.debug&&e.Debug.log({node:K.selector,"function":"extendOptions()","arguments":"{options.source: "+JSON.stringify(G[X])+"}",message:"ERROR - source.group.url or source.group.data is Required"})}for(var Y in G[X]){if(!G[X].hasOwnProperty(Y)){continue}if(!(G[X][Y] instanceof Object)||Y==="data"){Y="group";G[X]={group:G[X]}}if("data" in G[X][Y]&&!G[X][Y].data){G.debug&&e.Debug.log({node:K.selector,"function":"extendOptions()","arguments":"{options.source}",message:"ERROR - source.group.data is defined but empty"})}if(!G[X][Y].url&&!G[X][Y].data&&!(G[X][Y] instanceof Array)){G.debug&&e.Debug.log({node:K.selector,"function":"extendOptions()","arguments":"{options.source}",message:"ERROR - source.group.url or source.group.data is Required"})}}}else{if(b[X]&&c.inArray(G[X],b[X])===-1){G.debug&&e.Debug.log({node:K.selector,"function":"extendOptions()","arguments":"{"+X+":"+JSON.stringify(G[X])+"}",message:"WARNING - Unsupported option: "+X});delete G[X]}}}if(G.dynamic){G.cache=false;G.compression=false}if(G.cache){G.cache=(function(){var Z=typeof e.localStorage!=="undefined";if(Z){try{localStorage.setItem("typeahead","typeahead");localStorage.removeItem("typeahead")}catch(aa){Z=false}}return Z})()}G=c.extend(true,Object.preventExtensions(c.extend(true,{},j)),G)}function r(){u(G.callback.onInit,[K]);G.debug&&e.Debug.log({node:K.selector,"function":"delegateTypeahead()","arguments":JSON.stringify(G),message:"OK - Typeahead activated on "+K.selector});N=K.closest("."+G.selector.container);var X=["focus"+f,"input"+f,"propertychange"+f,"keydown"+f,"dynamic"+f];c("html").on("click"+f,function(Y){Q()});N.on("click"+f,function(Y){Y.stopPropagation();if(G.filter){N.find("."+G.selector.dropdown.replace(" ",".")).hide()}});K.closest("form").on("submit",function(Y){if(u(G.callback.onSubmit,[K,this,P,Y])){return false}});K.on(X.join(" "),function(Y){switch(Y.type){case"keydown":if(Y.keyCode&&~[9,13,27,38,39,40].indexOf(Y.keyCode)){z(Y)}break;case"focus":if(F===null){if(!G.dynamic){p()}}break;case"input":case"propertychange":if(!F){if(G.dynamic){V=c.trim(c(this).val());w(function(){if(V.length>=G.minLength&&V!==""){p()}},G.delay)}return}case"dynamic":default:V=c.trim(c(this).val());Q();if(V.length>=G.minLength&&V!==""){T();W()}if(Y.type==="dynamic"&&G.dynamic){F=false;q=0}break}})}function T(){if(V===""){return false}P=null;if(M&&!G.source[M]){M=false}var aa,ad=V,ae=0,af=/\d/.test(G.groupMaxItem)&&G.groupMaxItem,X;if(G.accent){ad=R(V)}for(var ac in O){if(!O.hasOwnProperty(ac)||(M&&ac!==M)){continue}if(af){X=0}for(var Z in O[ac]){if(!O[ac].hasOwnProperty(Z)){continue}if((B.length>=G.maxItem||(af&&X>=af))&&!G.callback.onResult){break}if(G.source[ac]&&G.source[ac].display){O[ac][Z].display=O[ac][Z][G.source[ac].display]}else{O[ac][Z].display=O[ac][Z][G.display]}if(typeof O[ac][Z].display==="undefined"){continue}aa=O[ac][Z].display.toString();if(!aa){G.debug&&e.Debug.log({node:K.selector,"function":"search()","arguments":'{display: "'+G.display+'"}',message:'WARNING - unable to find display: "'+G.display+'" inside '+JSON.stringify(O[ac][Z])});continue}if(G.accent){aa=R(aa)}if(aa.toLowerCase().indexOf(ad.toLowerCase())!==-1&&(!G.offset||aa.toLowerCase().indexOf(ad.toLowerCase())===0)){if(G.source[ac].ignore&&~G.source[ac].ignore.indexOf(aa)){continue}ae++;if(G.callback.onResult&&(B.length>=G.maxItem||(af&&X>=af))){continue}O[ac][Z].group=ac;B.push(O[ac][Z]);if(af){X++}}}}e.Debug.print();if(G.order){B.sort(U("display",G.order==="asc",function(ag){return ag.toString().toUpperCase()}))}if(G.group){var ab=[];for(var ac in O){for(var Y in B){if(B[Y].group===ac){ab.push(B[Y])}}}B=ab}u(G.callback.onResult,[K,V,B,ae]);return true}function W(){if(V===""||B.length===0){return false}var Z=c("<div/>",{"class":G.selector.result,html:c("<ul/>",{"class":G.selector.list,html:function(){for(var ab in B){if(!B.hasOwnProperty(ab)){continue}(function(am,al){if(typeof am.display!=="string"){am.display+=""}var ad,af,ae,ag,ah,aj,ai,ac,ak;if(G.group){ad=am.group;if(typeof G.group!=="boolean"&&am[G.group]){ad=am[G.group]}}if(G.list){af=am.group;if(typeof G.list!=="boolean"&&am[G.list]){af=am[G.list]}}if(G.group&&!c(al).find('li[data-search-group="'+ad+'"]')[0]){c(al).append(c("<li/>",{"class":G.selector.group,html:c("<a/>",{html:ad}),"data-search-group":ad}))}ah=am.display.toLowerCase();ai=V.toLowerCase();if(G.accent){ah=R(ah);ai=R(ai)}if(G.highlight){ah=L(ah,ai)}ae=c("<li/>",{html:c("<a/>",{href:"javascript:;123","data-group":ad,html:function(){ak=(am.group&&G.source[am.group].template)||G.template;if(ak){aj=(G.source[am.group]&&G.source[am.group].display)||G.display;ag=ak.replace(/\{\{([a-z0-9_\-]+)\}\}/gi,function(ao,an,ap){if(an===aj){return ah}return am[an]||"null"})}else{ag='<span class="'+G.selector.display+'">'+ah+"</span>"+((af)?"<small>"+af+"</small>":"")}c(this).append(ag)},click:({result:am},function(an){an.preventDefault();V=am.display;K.val(V).focus();Q();P=am;u(G.callback.onClick,[K,this,am,an])}),mouseenter:function(an){c(this).closest("li").siblings("li.active").removeClass("active");c(this).closest("li").addClass("active");u(G.callback.onMouseEnter,[K,this,am,an])},mouseleave:function(an){c(this).closest("li").removeClass("active");u(G.callback.onMouseLeave,[K,this,am,an])}})});if(G.group){ac=c(al).find('a[data-group="'+ad+'"]:last').closest("li");if(!ac[0]){ac=c(al).find('li[data-search-group="'+ad+'"]')}c(ae).insertAfter(ac)}else{c(al).append(ae)}}(B[ab],this))}}})});N.addClass("result").append(Z);if(G.backdrop){if(s.container){s.container.show()}else{s.css=c.extend({opacity:0.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},G.backdrop);s.container=c("<div/>",{"class":G.selector.backdrop,css:s.css,click:function(){Q()}}).insertAfter(N)}N.addClass("backdrop").css({"z-index":s.css["z-index"]+1,position:"relative"})}if(G.hint){if(!D.container){D.css=c.extend({"border-color":"transparent",position:"absolute","z-index":1,"-webkit-text-fill-color":"silver",color:"silver","background-color":"transparent","user-select":"none","box-shadow":"none"},G.hint);D.container=K.clone(true).attr({"class":G.selector.hint,readonly:true,tabindex:-1}).removeAttr("id placeholder name").css(D.css).insertBefore(K);K.css({position:"relative","z-index":2,"background-color":"transparent"}).parent().css({position:"relative"})}var aa,Y=(typeof G.group==="string"&&B[0][G.group])||B[0].group;for(var X in B){if(!B.hasOwnProperty(X)){continue}if(B[X].group!==Y){if(!aa){Y=B[X].group}else{break}}if(B[X].display.toLowerCase().indexOf(V.toLowerCase())===0){aa=B[X].display;break}}if(aa){D.container.val(V+aa.substring(V.length)).show()}}return true}function z(aa){if(B.length===0&&aa.keyCode!==13){return false}var Z=N.find("."+G.selector.result).find("li:not([data-search-group])"),Y=Z.siblings(".active");if(aa.keyCode===13){if(Z.filter(".active")[0]){aa.preventDefault();aa.stopPropagation();Z.filter(".active").find("a").click()}Q()}else{aa.preventDefault();if(Z.length>1){Y.removeClass("active")}if(aa.keyCode===40){if(Y[0]){Y.next().addClass("active")}else{c(Z[0]).toggleClass("active")}}else{if(aa.keyCode===38){if(Y[0]){Y.prev().addClass("active")}else{c(Z[B.length-1]).toggleClass("active")}}else{if(aa.keyCode===39){if(G.hint&&!Y[0]){K.val(D.container.val())}if(Y[0]){Y.find("a").click()}else{Z.filter(".active").find("a").click()}V=K.val();Q();return true}}}if(G.group){var X=Z.siblings(".active");if(X.attr("data-search-group")){X.removeClass("active");if(aa.keyCode===40){X.next().addClass("active")}else{if(aa.keyCode===38){X.prev().addClass("active")}}}}}if(G.hint){if(Z.filter(".active")[0]){D.container.hide()}else{D.container.show()}}K.val(Z.filter(".active").find("."+G.selector.display).text()||V);return true}function Q(){B=[];if(G.filter){N.removeClass("filter").find("."+G.selector.dropdown.replace(" ",".")).hide()}if(G.hint){N.removeClass("hint");if(D.container){D.container.val("")}}if(G.backdrop||V===""){N.removeClass("backdrop").removeAttr("style");if(s.container){s.container.hide()}}N.removeClass("result").find("."+G.selector.result).remove();u(G.callback.onResult,[K,"",[],0])}function p(){F=false;x=(new Date()).getTime();if(A===0){for(var Y in G.source){if(G.source.hasOwnProperty(Y)){++A}}}var ac;for(var ae in G.source){if(!G.source.hasOwnProperty(ae)){continue}if(!G.dynamic&&(O[ae]&&O[ae].length!==0)){E();continue}if(G.cache){O[ae]=localStorage.getItem(K.selector+":"+ae);if(O[ae]){if(G.compression){O[ae]=k(O[ae])}ac=JSON.parse(O[ae]);if(ac&&ac.data&&ac.ttl&&ac.ttl>new Date().getTime()){G.debug&&e.Debug.log({node:K.selector,"function":"generate()","arguments":"{cache: true}",message:"OK - List: "+K.selector+":"+ae+'" found in localStorage.'});e.Debug.print();O[ae]=ac.data;E();continue}}}if(!G.source[ae].data&&!G.source[ae].url){if(typeof G.source[ae]==="string"||G.source[ae] instanceof Array){G.source[ae]={url:G.source[ae]}}else{G.debug&&e.Debug.log({node:K.selector,"function":"generate()","arguments":"{source: undefined}",message:'ERROR - Source for group "'+ae+'" is undefined.'});e.Debug.print()}}O[ae]=[];if(G.source[ae].data&&G.source[ae].data instanceof Array){for(var ab in G.source[ae].data){if(!G.source[ae].data.hasOwnProperty(ab)){continue}if(G.source[ae].data[ab] instanceof Object){break}var aa={};aa[G.display]=G.source[ae].data[ab];G.source[ae].data[ab]=aa}O[ae]=O[ae].concat(G.source[ae].data);if(!G.source[ae].url){I(ae);E();continue}}if(G.source[ae].url){var X=(G.source[ae].url instanceof Array&&G.source[ae].url[0])||G.source[ae].url,ag=(G.source[ae].url instanceof Array&&G.source[ae].url[1])||null,af={};if(typeof X==="object"){af=c.extend(true,{},X);X=JSON.stringify(X)}var Z=H.get(X);if(/https?:\/\//.test(X)&&!~X.indexOf(e.location.host)&&!!~X.indexOf("{callback}")){y.fetch(X.replace("{callback}",encodeURIComponent(J)),function(ah){})}else{if(typeof Z==="undefined"){H.set(X,[])}else{if(Z instanceof Array&&Z.length===0){H.queue(X,ae,ag);continue}else{m(Z,ae,ag);E();continue}}if(af&&af.data){for(var ad in af.data){if(af.data[ad]==="{{query}}"){af.data[ad]=V;break}}}c.ajax(c.extend({async:true,url:X,dataType:"json",ajaxGroup:ae,ajaxPath:ag,ajaxTimestamp:x},af)).done(function(ah){if(this.ajaxTimestamp!==x){return false}if(typeof this.process==="function"){ah=this.process(ah)}H.set(X,ah);H.processQueue(X);m(ah,this.ajaxGroup,this.ajaxPath)}).fail(function(){G.debug&&e.Debug.log({node:K.selector,"function":"generate()","arguments":"{url: "+this.url+"}",message:"ERROR - Ajax request failed."})}).complete(function(){if(this.ajaxTimestamp===x){E()}})}}}}function S(){if(!G.filter){return false}c("<span/>",{"class":G.selector.filter,html:function(){c(this).append(c("<button/>",{type:"button","class":G.selector.filterButton,html:"<span class='"+G.selector.filterValue+"'>"+G.filter+"</span> <span class='caret'></span>",click:function(Z){Z.stopPropagation();var Y=N.find("."+G.selector.dropdown.replace(" ","."));if(!Y.is(":visible")){N.addClass("filter");Y.show()}else{N.removeClass("filter");Y.hide()}}}));c(this).append(c("<ul/>",{"class":G.selector.dropdown,html:function(){for(var Y in G.source){if(!G.source.hasOwnProperty(Y)){continue}(function(aa,ab){var Z=c("<li/>",{html:c("<a/>",{href:"javascript:;",html:aa,click:({i:aa},function(ac){ac.preventDefault();X(aa)})})});c(ab).append(Z)}(Y,this))}c(this).append(c("<li/>",{"class":"divider"}));c(this).append(c("<li/>",{html:c("<a/>",{href:"javascript:;",html:G.filter,click:function(Z){Z.preventDefault();X()}})}))}}))}}).insertAfter(N.find("."+G.selector.query));function X(Y){M=Y;N.find("."+G.selector.filterValue).text(M||G.filter);N.find("."+G.selector.dropdown.replace(" ",".")).hide();Q();T();W();K.focus()}}function l(X){if(!X||!X.group){G.debug&&e.Debug.log({node:K.selector,"function":"populate()",message:'ERROR - Empty data or Missing {data.group} parameter"'});e.Debug.print();return false}var Z=X.group||"group",Y=(G.source[Z].url instanceof Array)?G.source[Z].url[1]:null;m(X,Z,Y);E()}var m=function(ab,ae,ad){var aa=true;if(ad){var X=ad.split("."),Y=0;while(Y<X.length){if(typeof ab!=="undefined"){ab=ab[X[Y++]]}else{aa=false;break}}}if(aa){for(var Z in ab){if(!ab.hasOwnProperty(Z)){continue}if(ab[Z] instanceof Object){break}var ac={};ac[G.display]=ab[Z];ab[Z]=ac}O[ae]=O[ae].concat(ab);I(ae)}};var I=function(Y){if(!G.cache){return false}var X={ttl:new Date().getTime()+G.ttl,data:O[Y]};X=JSON.stringify(X);if(G.compression){X=n(X)}localStorage.setItem(K.selector+":"+Y,X)};var H={_queue:[],get:function(X){return o[X]},set:function(X,Y){o[X]=Y},queue:function(X,Z,Y){this._queue.push({url:X,group:Z,path:Y})},processQueue:function(X){for(var Y in this._queue){if(this._queue[Y].url!==X){continue}m(o[X],this._queue[Y].group,this._queue[Y].path);E();delete this._queue[Y]}}};function E(){q++;if(q===A){F=true;o=[];if(G.dynamic){K.trigger("dynamic.typeahead.input")}}}function C(){if(!N[0]){G.debug&&e.Debug.log({node:K.selector,"function":"_validateHtml()","arguments":G.selector.container,message:'ERROR - Missing input parent container class: ".'+G.selector.container+'"'});return false}c.each([G.selector.query,G.selector.button],function(Y,X){if(!N.find("."+X)[0]){G.debug&&e.Debug.log({node:K.selector,"function":"_validateHtml()","arguments":G.selector.query,message:'ERROR - Missing container with class: ".'+X+'"'})}})}var U=function(Z,X,aa){var Y=aa?function(ab){return aa(ab[Z])}:function(ab){return ab[Z]};X=[-1,1][+!!X];return function(ac,ab){return ac=Y(ac),ab=Y(ab),X*((ac>ab)-(ab>ac))}};var R=function(Y){if(!Y||typeof Y!=="string"){return false}Y=Y.toLowerCase();for(var Z=0,X=d.from.length;Z<X;Z++){Y=Y.replace(new RegExp(d.from.charAt(Z),"g"),d.to.charAt(Z))}return Y};var v=function(X,aa,Z,Y){return X.substring(0,aa)+Y+X.substring(aa+Z)};var L=function(X,Y){var Z=X.indexOf(Y);if(Z===-1){return X}return v(X,Z,Y.length,"<strong>"+X.substr(Z,Y.length)+"</strong>")};var w=(function(){var X=0;return function(Z,Y){clearTimeout(X);X=setTimeout(Z,Y)}})();var u=function(ad,ac){if(!ad){return false}var Y;if(typeof ad==="function"){Y=ad}else{if(typeof ad==="string"||ad instanceof Array){Y=e;if(typeof ad==="string"){ad=[ad,[]]}var X=ad[0].split("."),aa=ad[1],ab=true,Z=0;while(Z<X.length){if(typeof Y!=="undefined"){Y=Y[X[Z++]]}else{ab=false;break}}if(!ab||typeof Y!=="function"){G.debug&&e.Debug.log({node:K.selector,"function":"_executeCallback()","arguments":JSON.stringify(ad),message:'WARNING - Invalid callback function"'});return false}}}Y.apply(this,c.merge(aa||[],(ac)?ac:[]));return true};var y={fetch:function(X,aa){var Y=encodeURIComponent(J);e[Y]=this.evalJSONP(aa);X=X.replace("="+J,"="+Y);var Z=g.createElement("SCRIPT");Z.src=X;g.getElementsByTagName("HEAD")[0].appendChild(Z)},evalJSONP:function(X){return function(Z){var Y=false;if(typeof Z==="string"){try{Y=JSON.parse(Z)}catch(aa){}}else{Y=JSON.parse(JSON.stringify(Z))}if(Y){X(Y)}else{throw ("JSONP call returned invalid or empty JSON")}}}};var n=function(aa){var ae={},ac=(aa+"").split(""),Y=[],ad,X=ac[0],ab=256;for(var Z=1;Z<ac.length;Z++){ad=ac[Z];if(ae[X+ad]!=null){X+=ad}else{Y.push(X.length>1?ae[X]:X.charCodeAt(0));ae[X+ad]=ab;ab++;X=ad}}Y.push(X.length>1?ae[X]:X.charCodeAt(0));for(var Z=0;Z<Y.length;Z++){Y[Z]=String.fromCharCode(Y[Z])}return Y.join("")};var k=function(ag){var Y={},af=(ag+"").split(""),aa=af[0],Z=aa,ad=[aa],X=256,ab;for(var ae=1;ae<af.length;ae++){var ac=af[ae].charCodeAt(0);if(ac<256){ab=af[ae]}else{ab=Y[ac]?Y[ac]:(Z+aa)}ad.push(ab);aa=ab.charAt(0);Y[X]=Z+aa;X++;Z=ab}return ad.join("")};this.__construct=function(){t();r();S();C();e.Debug&&e.Debug.print()}();return{populate:l}};c.fn.typeahead=c.typeahead=function(k){return i.typeahead(this,k)};var i={typeahead:function(l,k){if(!k||!k.source){e.Debug.log({node:l.selector,"function":"$.typeahead()","arguments":"",message:"Missing source option - Typeahead dropped"});e.Debug.print();return}if(typeof l==="function"){if(!k.input){e.Debug.log({node:l.selector,"function":"$.typeahead()","arguments":"",message:'Undefined property "options.input - Typeahead dropped'});e.Debug.print();return}l=c(k.input);if(!l[0]||l.length>1){e.Debug.log({node:l.selector,"function":"$.typeahead()","arguments":JSON.stringify(k.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"});e.Debug.print();return}}else{if(typeof l[0]==="undefined"||l.length>1){e.Debug.log({node:l.selector,"function":"$.typeahead()","arguments":'$("'+l.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"});e.Debug.print();return}}return e.Typeahead.source[l.selector]=new h(l,k)}};e.Debug={table:{},log:function(k){if(!k.message||typeof k.message!=="string"){return false}this.table[k.message]=c.extend(Object.preventExtensions({node:"","function":"","arguments":""}),k)},print:function(){if(c.isEmptyObject(this.table)){return false}if(console.group!==a||console.table!==a){console.groupCollapsed("--- jQuery Typeahead Debug ---");if(console.table){console.table(this.table)}else{c.each(this.table,function(k,l){console.log(l.Name+": "+l["Execution Time"]+"ms")})}console.groupEnd()}else{console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox.")}this.table={}}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(l){var k=this.length>>>0;var m=Number(arguments[1])||0;m=(m<0)?Math.ceil(m):Math.floor(m);if(m<0){m+=k}for(;m<k;m++){if(m in this&&this[m]===l){return m}}return -1}}}(window,document,window.jQuery));